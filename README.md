# TTSæ–‡æœ¬è¿‡æ»¤æ’ä»¶

ä¸€ä¸ªæ™ºèƒ½çš„AstrBot TTSæ–‡æœ¬è¿‡æ»¤æ’ä»¶ï¼Œæ”¯æŒå‰ç«¯é…ç½®ç•Œé¢ï¼Œå¯è¿‡æ»¤é¢œæ–‡å­—ã€ç‰¹æ®Šç¬¦å·ã€ç½‘ç»œç”¨è¯­ç­‰ä¸é€‚åˆTTSæœ—è¯»çš„å†…å®¹ã€‚

## âœ¨ ä¸»è¦ç‰¹æ€§

- **é¢œæ–‡å­—è¿‡æ»¤**: è‡ªåŠ¨ç§»é™¤ `(ï¼¾_ï¼¾)`, `(>_<)`, `o_o` ç­‰é¢œæ–‡å­—
- **ç‰¹æ®Šç¬¦å·æ¸…ç†**: è¿‡æ»¤ â˜…â™ªâ™¥ðŸ’–â†’ ç­‰è£…é¥°æ€§ç¬¦å·  
- **ç½‘ç»œç”¨è¯­å¤„ç†**: `233` â†’ `å“ˆå“ˆå“ˆ`, `666` â†’ `åŽ‰å®³`
- **é‡å¤å­—ç¬¦åŽ‹ç¼©**: `å“ˆå“ˆå“ˆå“ˆå“ˆ` â†’ `å“ˆå“ˆ`
- **åˆ†ç¦»è¿‡æ»¤æ¨¡å¼**: æ”¯æŒç›´æŽ¥è¿‡æ»¤ï¼ˆä¸æœ—è¯»ï¼‰å’Œæ›¿æ¢æœ—è¯»ä¸¤ç§æ¨¡å¼
- **å‰ç«¯é…ç½®ç•Œé¢**: é€šè¿‡AstrBoté…ç½®é¢æ¿è½»æ¾è®¾ç½®
- **æ­£åˆ™è¡¨è¾¾å¼æ”¯æŒ**: æ”¯æŒå¤æ‚çš„è¿‡æ»¤æ¨¡å¼
- **å­—æ•°é™åˆ¶**: å¯è®¾ç½®è¶…è¿‡æŒ‡å®šå­—æ•°ä¸è¿›è¡ŒTTSæœ—è¯»
- **å®žæ—¶è°ƒæ•´**: é…ç½®ä¿®æ”¹åŽæ— éœ€é‡å¯å³å¯ç”Ÿæ•ˆ
- **è¯¦ç»†æ—¥å¿—**: å¯å¼€å¯è°ƒè¯•æ¨¡å¼æŸ¥çœ‹è¯¦ç»†è¿‡æ»¤è¿‡ç¨‹

## ðŸš€ å®‰è£…ä½¿ç”¨

### æ‰‹åŠ¨å®‰è£…
1. ä¸‹è½½æ’ä»¶æ–‡ä»¶åˆ°AstrBotæ’ä»¶ç›®å½•
2. é‡å¯AstrBotæˆ–æ‰‹åŠ¨åŠ è½½æ’ä»¶
3. åœ¨é…ç½®é¢æ¿ä¸­è°ƒæ•´è¿‡æ»¤è§„åˆ™

### é…ç½®è¯´æ˜Ž
æ’ä»¶æ”¯æŒä»¥ä¸‹é…ç½®é¡¹ï¼š

- **å¯ç”¨è¿‡æ»¤**: æ€»å¼€å…³ï¼ŒæŽ§åˆ¶æ˜¯å¦å¯ç”¨è¿‡æ»¤åŠŸèƒ½
- **æœ€å¤§æœ—è¯»å­—æ•°**: è¶…è¿‡æ­¤å­—æ•°å°†è·³è¿‡TTS (0=æ— é™åˆ¶)
- **é¢œæ–‡å­—è¿‡æ»¤è§„åˆ™**: æ­£åˆ™è¡¨è¾¾å¼åˆ—è¡¨ï¼ŒåŒ¹é…éœ€è¦è¿‡æ»¤çš„é¢œæ–‡å­—
- **ç›´æŽ¥è¿‡æ»¤è¯æ±‡**: å®Œå…¨ä¸æœ—è¯»çš„è¯æ±‡åˆ—è¡¨ (å¦‚ï¼šorz, QAQ)
- **æ›¿æ¢è¯æ±‡é…ç½®**: æ›¿æ¢è§„åˆ™ï¼Œæ ¼å¼ä¸º"åŽŸè¯|æ›¿æ¢è¯" (å¦‚ï¼š233|å“ˆå“ˆå“ˆ)
- **ç‰¹æ®Šç¬¦å·è¿‡æ»¤**: æ˜¯å¦è¿‡æ»¤è£…é¥°æ€§ç¬¦å·å’Œè¡¨æƒ…
- **é‡å¤å­—ç¬¦å¤„ç†**: æ˜¯å¦åŽ‹ç¼©é‡å¤å­—ç¬¦ (å¦‚ï¼šå“ˆå“ˆå“ˆå“ˆ â†’ å“ˆå“ˆ)
- **è°ƒè¯•æ¨¡å¼**: æ˜¯å¦è¾“å‡ºè¯¦ç»†çš„å¤„ç†æ—¥å¿—

#### åˆ†ç¦»è¿‡æ»¤å’Œæ›¿æ¢æ¨¡å¼
- **ç›´æŽ¥è¿‡æ»¤**: è¯æ±‡å®Œå…¨ä»ŽTTSä¸­ç§»é™¤ï¼Œä¸æœ—è¯»
- **æ›¿æ¢æœ—è¯»**: è¯æ±‡æ›¿æ¢ä¸ºæ›´é€‚åˆæœ—è¯»çš„å†…å®¹
- **å‰ç«¯é…ç½®**: æ”¯æŒåœ¨AstrBoté…ç½®é¢æ¿ä¸­ç›´æŽ¥ç¼–è¾‘

## ðŸŽ® ä½¿ç”¨å‘½ä»¤

### åŸºæœ¬å‘½ä»¤
- `/tts_filter_test [æ–‡æœ¬]` - æµ‹è¯•è¿‡æ»¤æ•ˆæžœ
- `/tts_filter_stats` - æŸ¥çœ‹æ’ä»¶çŠ¶æ€å’Œé…ç½®ä¿¡æ¯
- `/tts_filter_reload` - é‡æ–°åŠ è½½é…ç½®

### ä½¿ç”¨ç¤ºä¾‹
```
/tts_filter_test ä½ å¥½(ï¼¾_ï¼¾)è¿™æ˜¯æµ‹è¯•233å“ˆå“ˆå“ˆå“ˆâ™ª

ðŸ“ åŽŸæ–‡ (15 å­—ç¬¦):
ä½ å¥½(ï¼¾_ï¼¾)è¿™æ˜¯æµ‹è¯•233å“ˆå“ˆå“ˆå“ˆâ™ª

ðŸ”§ è¿‡æ»¤åŽ (9 å­—ç¬¦):
ä½ å¥½è¿™æ˜¯æµ‹è¯•å“ˆå“ˆå“ˆå“ˆ

ðŸ“Š ç»Ÿè®¡ä¿¡æ¯:
â€¢ åº”ç”¨çš„è¿‡æ»¤å™¨: emoticon, replace:233->å“ˆå“ˆå“ˆ, special_chars
â€¢ å­—ç¬¦åŽ‹ç¼©çŽ‡: 40.0%
â€¢ TTSçŠ¶æ€: âœ… å¯æœ—è¯»
```

## ðŸ”§ å·¥ä½œåŽŸç†

### è¿‡æ»¤æµç¨‹
```
LLMå›žå¤ â†’ æ–‡æœ¬è¿‡æ»¤ â†’ å­—æ•°æ£€æŸ¥ â†’ TTSåˆæˆ
           â†“
    åº”ç”¨æ‰€æœ‰è¿‡æ»¤è§„åˆ™:
    1. é¢œæ–‡å­—ç§»é™¤
    2. è¿‡æ»¤è¯æ±‡ç§»é™¤  
    3. è¯æ±‡æ›¿æ¢
    4. ç‰¹æ®Šç¬¦å·ç§»é™¤
    5. é‡å¤å­—ç¬¦åŽ‹ç¼©
    6. ç©ºæ ¼æ¸…ç†
```

### æ‹¦æˆªæ—¶æœº
æ’ä»¶ä½¿ç”¨ `@filter.on_llm_response()` åœ¨LLMå“åº”é˜¶æ®µæ‹¦æˆªæ–‡æœ¬ï¼Œç¡®ä¿ï¼š
- åœ¨TTSæ’ä»¶å¤„ç†ä¹‹å‰è¿›è¡Œè¿‡æ»¤
- å¯¹æ‰€æœ‰TTSå¼•æ“Žéƒ½æœ‰æ•ˆ
- ä¸å½±å“å…¶ä»–æ’ä»¶åŠŸèƒ½

## ðŸ“ˆ é…ç½®ç¤ºä¾‹

```json
{
  "enabled": true,
  "max_length": 200,
  "emoticon_patterns": [
    "[ï¼ˆ(][^ï¼ˆ()]*[ï¼‰)]",
    "[ï¼ž>][ï¼¿_][ï¼œ<]",
    "[ï¼¾^][ï¼¿_][ï¼¾^]"
  ],
  "filter_words": ["233", "666", "orz"],
  "replacement_rules": {
    "233": "å“ˆå“ˆå“ˆ",
    "666": "åŽ‰å®³"
  },
  "filter_special_chars": true,
  "filter_repeats": true,
  "max_repeat_count": 2,
  "debug_mode": false
}
```

## ðŸ› æ•…éšœæŽ’é™¤

### å¸¸è§é—®é¢˜
1. **è¿‡æ»¤ä¸ç”Ÿæ•ˆ**: æ£€æŸ¥æ’ä»¶æ˜¯å¦å¯ç”¨ï¼Œä¼˜å…ˆçº§æ˜¯å¦è¶³å¤Ÿé«˜
2. **é…ç½®ä¸ä¿å­˜**: ç¡®è®¤AstrBotç‰ˆæœ¬æ”¯æŒæ’ä»¶é…ç½®é¢æ¿
3. **æ­£åˆ™è¡¨è¾¾å¼é”™è¯¯**: æ£€æŸ¥é…ç½®ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•

### è°ƒè¯•æ–¹æ³•
1. å¼€å¯è°ƒè¯•æ¨¡å¼æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
2. ä½¿ç”¨æµ‹è¯•å‘½ä»¤éªŒè¯è¿‡æ»¤æ•ˆæžœ
3. æ£€æŸ¥ç»Ÿè®¡ä¿¡æ¯ç¡®è®¤æ’ä»¶è¿è¡ŒçŠ¶æ€

## ðŸ”„ ç‰ˆæœ¬åŽ†å²

- **v0.2** - åˆ†ç¦»è¿‡æ»¤å’Œæ›¿æ¢åŠŸèƒ½ï¼Œä¼˜åŒ–é…ç½®ç•Œé¢ï¼Œç§»é™¤æ•°æ®æŒä¹…åŒ–
- **v0.1** - åˆå§‹ç‰ˆæœ¬ï¼ŒåŸºç¡€è¿‡æ»¤åŠŸèƒ½

## ðŸ“ è®¸å¯è¯

MIT License
